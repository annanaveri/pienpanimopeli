var Brew={game:null};(function(){Brew.Booter=function(){return};Brew.Booter.prototype={preload:function(){return},update:function(){this.state.add("Preloader",Brew.Preloader,true)}}})();(function(){var game=new Phaser.Game(960,720,Phaser.AUTO,"game");game.state.add("Booter",Brew.Booter,true);Brew.game=game})();(function(){Brew.Preloader=function(){return};Brew.Preloader.prototype={create:function(){this.state.add("Main",Brew.Main)},preload:function(){this.progress=this.game.add.text(this.game.width/2,this.game.height/2,"Ladataan: 0 %",{font:"40pt bold Arial",fill:"#FFFFFF"});this.progress.anchor.set(.5);this.progress.fixedToCamera=true;this.load.image("floor","assets/sprites/floor.png");this.load.image("cursor","assets/sprites/select.png");Brew.game.plugins.add(new Phaser.Plugin.Isometric(Brew.game))},loadUpdate:function(){this.progress.text="Loading: "+this.load.progress+" %"},update:function(){this.state.start("Main")}}})();(function(){var settings={tileSize:38};Brew.Main=function(){return};Brew.Main.prototype={create:function(){this.isoGroup=this.add.group();this.__makeFloor();this.cursorPosition=this.cursor=this.add.isoSprite(0,0,0,"cursor",0,this.isoGroup)},update:function(){var _pos=new Phaser.Plugin.Isometric.Point3;this.game.iso.unproject(this.game.input.activePointer.position,_pos);this.isoGroup.forEach(function(tile){var inBounds=tile.isoBounds.containsXY(_pos.x,_pos.y);if(inBounds){this.cursor.isoX=tile.isoX;this.cursor.isoY=tile.isoY}},this)},__makeFloor:function(){var tile;for(var xx=0;xx<15*settings.tileSize;xx+=settings.tileSize){for(var yy=0;yy<15*settings.tileSize;yy+=settings.tileSize){tile=this.add.isoSprite(xx,yy,0,"floor",0,this.isoGroup)}}}}})();